{"mappings":"oeACA,IAAAA,EAAAC,EAAA,S,aAIA,MAAMC,EAAYC,SAASC,cAAc,cACnCC,EAAOF,SAASC,cAAc,S,IAyCpCE,EAlCAC,iBAEEP,EAAAQ,MAAMC,KAAO,OAGb,MAAMC,EAAU,IAAI,EAAAC,EAAAC,SAAQ,OAC5BF,EAAQG,SAGR,MAAMC,EAAO,IAAI,EAAAH,EAAAI,MACjBD,EAAKD,SAGL,MAAMG,EAAS,IAAI,EAAAL,EAAAM,QAAO,OAkB1B,OAjBAD,EAAOH,SAGPb,EAAAkB,MAAMC,IAAI,OAAQL,GAClBd,EAAAkB,MAAMC,IAAI,UAAWT,GACrBV,EAAAkB,MAAMC,IAAI,SAAUH,GAGpBI,OAAOC,QAAQC,UAAU,CAAEb,KAAMT,EAAAQ,MAAMC,MAAO,KAG9C,EAAAE,EAAAY,QAAOZ,EAAAa,UAAUC,MAAK,KACpBpB,EAAKqB,UAAUC,IAAI,UACnBzB,EAAUwB,UAAUC,IAAI,cAInB,CACT,E,4BCtCAnB,MAAMoB,WADU,YAIhBR,OAAOS,WAAcC,IACnBA,EAAEC,iBACa,MAAXD,EAAEE,OAAkBF,EAAEE,MAAMvB,OAChC,EAAAwB,EAAAC,SAAQJ,EAAEE,MAAMvB,KAAI,EAItBN,SAASgC,iBAAiB,oBAAoB,IAAM7B","sources":["src/handlers/initapp.js","src/magazine/main.js"],"sourcesContent":["\nimport { store, cache } from \"../util/index.js\";\nimport { Toolbar, Home, Footer, fadeIn, elements } from \"../modules/index.js\";\n\n// DOM\nconst container = document.querySelector(\".container\");\nconst root = document.querySelector(\"#root\");\n\n/* \n  At initialization we fetch data for the current website from the database.\n  Then we create a toolbar, a footer and a home page. They are cached for later use. \n*/\n\nasync function initApp() {\n\n  store.page = \"home\";\n\n  // create toolbar\n  const toolbar = new Toolbar(\"spa\");\n  toolbar.render();\n\n  // create home page\n  const home = new Home();\n  home.render()\n\n  // create footer\n  const footer = new Footer(\"spa\");\n  footer.render();\n\n  // cache the elements\n  cache.set(\"home\", home);\n  cache.set(\"toolbar\", toolbar);\n  cache.set(\"footer\", footer);\n\n  // set History API\n  window.history.pushState({ page: store.page}, \"\");\n\n  // fade in the page\n  fadeIn(elements).then(() => {\n    root.classList.add(\"loaded\");    \n    container.classList.add(\"loaded\")\n    // footerDom.classList.add(\"loaded\"); \n  });\n\n  return true;\n}\n\nexport default initApp;\n","\nimport initApp from \"../handlers/initapp.js\";\nimport setPage from \"../handlers/setpage.js\";\nimport { store } from \"../util/index.js\";\n\n// Init store with the current website template\nconst website = \"magazine\";\nstore.setWebsite(website);\n\n// History API\nwindow.onpopstate = (e) => {\n  e.preventDefault();\n  if (e.state == null || !e.state.page) return;\n  setPage(e.state.page);\n};\n\n// Init app\ndocument.addEventListener(\"DOMContentLoaded\", () => initApp());\n\n"],"names":["$EcV8N","parcelRequire","$fb920c1c214df56f$var$container","document","querySelector","$fb920c1c214df56f$var$root","$fb920c1c214df56f$export$2e2bcd8739ae039","async","store","page","toolbar","$edh6f","Toolbar","render","home","Home","footer","Footer","cache","set","window","history","pushState","fadeIn","elements","then","classList","add","setWebsite","onpopstate","e","preventDefault","state","$f4ixp","default","addEventListener"],"version":3,"file":"index.ff11ee8b.js.map"}